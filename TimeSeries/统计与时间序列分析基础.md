# 统计与时间序列分析基础

## 平均值

```R
> y = array(1:20, dim=c(4, 5))
> y
    [,1] [,2] [,3] [,4] [,5]
[1,]   1    5    9    13   17
[2,]   2    6    10   14   18
[3,]   3    7    11   15   19
[4,]   4    8    12   16   20
> mean(y) # 对矩阵中的所有元素求平均值
[1] 10.5
> colMeans(y) # 计算每行的均值
[1] 2.5 6.5 10.5 14.5 18.5
> rowMeans(y) # 列均值
[1] 9 10 11 12
```

## 方差和标准差

```R
> x = exp(seq(-1, 3, by=0.1)) # 从-1到3，步长为0.1
> x
 [1]  0.3678794  0.4065697  0.4493290  0.4965853
 [5]  0.5488116  0.6065307  0.6703200  0.7408182
 [9]  0.8187308  0.9048374  1.0000000  1.1051709
[13]  1.2214028  1.3498588  1.4918247  1.6487213
[17]  1.8221188  2.0137527  2.2255409  2.4596031
[21]  2.7182818  3.0041660  3.3201169  3.6692967
[25]  4.0552000  4.4816891  4.9530324  5.4739474
[29]  6.0496475  6.6858944  7.3890561  8.1661699
[33]  9.0250135  9.9741825 11.0231764 12.1824940
[37] 13.4637380 14.8797317 16.4446468 18.1741454
> var(x) # 计算方差
[1] 29.35325
> sd(x) # 计算标准差
[1] 5.417864
```

## 偏度和峰度

可以通过自己编写函数来计算偏度和峰度：

```R
> skewness <- function(x) { sum(((x-mean(x)) ^ 3)) / length(x) } # 计算偏度
> skewnexx(x)
[1] 197.8397
> kurtosis <- function(x) {
+     a = mean(x)
+     n = length(x)
+     m4 = sum((x-a)^4)/n
+     m2 = sum((x-a)^2)/n
+     kurt = m4/m2^2-3
+     kurt
+ } # 计算峰度
> kurtosis(x)
[1] 0.6260693
```

也可以通过 moments 包中的 skewness 和 kurtosis 函数来计算偏度和峰度。

首先通过 `> install.packages(moments)` 来安装 moments 包，然后通过 `> library(moments) ` 来使用这个包。之后就可以直接通过 `skewness()` 和 `kurtosis()` 来计算偏度和峰度。

## 重要的概率分布

### 正态分布

通过 `rnorm()` 函数可以产生服从正态分布的随机数，`rnorm()` 函数的原型为 `rnorm(n, mean=0, sd=1)` ，其中 `n` 为生成数据个数，`mean` 为生成数据的均值，`sd` 为生成数据的标准差。例如：

```R
> norm = rnorm(1000, 0, 1)
> mean(norm)
[1] 0.001165962
> sd(norm)
[1] 1.000664
> hist(norm, prob=TRUE, 30) # 绘制频率分布直方图
> curve(dnorm, add=TRUE) # 为直方图添加正态分布曲线
```

![image-20210922175847365](.\typora-user-images\image-20210922175847365.png)

### $\chi^2$ 分布

可以通过 `rchisq(n, df)` 来产生 n 个 服从自由度为 df 的 $\chi^2$ 分布的随机数

```R
> rchisq(n=1000, df=20)
> hist(chi, prob=TRUE, 30)
```

![image-20210922180552465](.\typora-user-images\image-20210922180552465.png)

### $t$ 分布

```R
> t = rt(n=1000, df=5)
> hist(t, prob=TRUE, 30)
```

![image-20210922185944045](.\typora-user-images\image-20210922185944045.png)

### $F$ 分布

```R
> f = rf(n=1000, df1=10, df2=50)
> hist(f, prob=TRUE, 30)
```

![image-20210922191248078](.\typora-user-images\image-20210922191248078.png)